<nav class="flex items-center justify-between flex-wrap bg-yellow-600 p-6 px-10">
    <div class="flex items-center flex-shrink-0 text-white mr-6">
        <span class="font-semibold text-xl tracking-tight text-blue-900">
            <a href="/">Public Library</a>
        </span>
    </div>
    
    <!-- Mobile Menu Toggle Button -->
    <div class="block lg:hidden">
        <button id="nav-toggle" class="flex items-center px-3 py-2 border rounded text-white border-white-400 hover:text-white hover:border-white">
            <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <title>Menu</title>
                <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/>
            </svg>
        </button>
    </div>
    
    <!-- Navigation Menu -->
    <div id="nav-menu" class="w-full block lg:flex lg:items-center md:flex-row lg:w-auto px-10 hidden lg:block">
        {% if request.user.is_authenticated %}
        <!-- Centered Links (Deposit, Home) -->
        <div class="text-xl lg:flex-grow flex flex-col lg:flex-row justify-center items-center space-y-4 lg:space-y-0 lg:space-x-10">
            <a href="{% url 'deposit_money' %}" class="block lg:inline-block text-white hover:text-red-900 font-bold">
                Deposit
            </a>
            <a href="{% url 'home' %}" class="block lg:inline-block text-white hover:text-red-900 font-bold">
                Home
            </a>
        </div>

        <!-- Profile, Logout, and Welcome Message (Right-Aligned) -->
        <div class="flex flex-col md:flex-row md:items-center md:w-auto space-y-4 md:space-y-0">
            <div class="text-blue-900 font-black px-5 text-center md:text-left">
                Welcome, {{ request.user.first_name }} 
                <span class="block">(balance: {{request.user.account.balance}})</span>
            </div>

            <a href="{% url 'profile' %}" class="mx-2 inline-block font-medium text-md px-4 py-2 bg-blue-900 rounded text-white hover:text-dark hover:bg-yellow-700 text-center">
                Profile
            </a>

            <form action="{% url 'user_logout' %}" method="post" class="text-center">
                {% csrf_token %}
                <button type="submit" class="mx-2 inline-block font-medium text-md px-4 py-2 bg-blue-900 rounded text-white hover:text-dark hover:bg-red-700">
                    Logout
                </button>
            </form>
        </div>
        {% else %}
        <!-- Non-authenticated Users (Login, Register) -->
        <div class="flex flex-col lg:flex-row lg:space-x-4">
            <a href="{% url 'user_login' %}" class="mr-2 inline-block font-medium text-md px-6 py-3 bg-blue-700 rounded-md text-white hover:text-gray-800 hover:bg-yellow-200 text-center">
                Login
            </a>
            <a href="{% url 'register' %}" class="inline-block font-medium text-md px-5 py-3 bg-blue-700 rounded-md text-white hover:text-gray-800 hover:bg-white text-center">
                Register
            </a>
        </div>
        {% endif %}
    </div>
</nav>

<script>
    document.getElementById('nav-toggle').addEventListener('click', function() {
        var menu = document.getElementById('nav-menu');
        menu.classList.toggle('hidden');
    });
</script>
